# HTGTS Pipeline

## Description
This repository contains two main scripts used for High-Throughput Genome-wide Translocation Sequencing (HTGTS) analysis. The scripts are:

- **`generateLibInfo.sh`**: Generates sequencing library information from an XML file.
- **`htgts.sh`**: Executes the HTGTS analysis using FASTQ files and library data.

Both scripts run inside a Docker container using the image `repbioinfo/htgts_pipeline_lts_v16`.

---

## Script: `generateLibInfo.sh`

### Usage
```bash
./generateLibInfo.sh <xml_file_path> <configType>
```

### Description
This script:
1. Checks for the presence of the XML file.
2. Runs a Docker container to process the XML file and generate two output files:
   - `libseqInfo.txt`
   - `libseqInfo2.txt`

### Arguments
- **`<xml_file_path>`**: Path to the XML file containing library information.
- **`<configType>`**: The required configuration type (e.g., `HTGTS_mouse`).

### Available Configurations
Configurations are defined in `config_types.json`. Examples include:
- `HTGTS_mouse`
- `HTGTS_human`
- `CELTICSseq`
- `polyA`

Each configuration contains details such as:
- **`restrictionSite`**: Restriction site (e.g., `GGCC`)
- **`redPrimer`**: Red primer sequence
- **`bluePrimer`**: Blue primer sequence (if available)
- **`chr`, `start`, `end`**: Genomic position of the breaksite

---

## Script: `htgts.sh`

### Usage
```bash
./htgts.sh <Data_folder> <fastq1> <fastq2> <expInfo> <expInfo2> <outDir> <configType> <assembly>
```

### Description
This script performs HTGTS sequencing analysis. It:
1. Accepts a folder containing input data.
2. Runs a Docker container to process the FASTQ files.
3. Generates output data in the specified folder.

### Arguments
- **`<Data_folder>`**: Folder containing input data.
- **`<fastq1>`**: First input FASTQ file.
- **`<fastq2>`**: Second input FASTQ file (optional).
- **`<expInfo>`**: `libseqInfo.txt` file generated by `generateLibInfo.sh`.
- **`<expInfo2>`**: `libseqInfo2.txt` file generated by `generateLibInfo.sh`.
- **`<outDir>`**: Output folder.
- **`<configType>`**: Configuration type (e.g., `HTGTS_mouse`).
- **`<assembly>`**: Reference genome version (e.g., `mm9`).

### Commands Used in the Script
Specific commands are defined in `commands.json`, including:
- **`demultiplexing`**: Identifies sequences in FASTQ files (uses `GEAT0.2.jar`).
- **`alignment`**: Aligns sequences using `TLPpipeline.pl`.
- **`bedGeneration`**: Generates BED files for analysis.

---

## Full Example (`Example.sh`)

The `Example.sh` script demonstrates how to use both scripts together.

### Execution
```bash
chmod +x generateLibInfo.sh htgts.sh Example.sh
./Example.sh
```

### Example Script (`Example.sh`)
```bash
current_dir=$(pwd)
./generateLibInfo.sh "$current_dir"/Data/HTGTS.xlsx HTGTS_mouse
./htgts.sh "$current_dir"/Data/ filtered_JT8572_S1_R1_001.fastq filtered_JT8572_S1_R2_001.fastq libseqInfo.txt libseqInfo2.txt output_dir HTGTS_mouse mm9
```

This script runs:
1. `generateLibInfo.sh` to generate library information files.
2. `htgts.sh` to analyze the FASTQ files using the generated information.

---

## Requirements
- Docker must be installed and properly configured.
- Access to the `repbioinfo/htgts_pipeline_lts_v16` Docker image.

---

## Contact
For any questions or issues, contact the repository maintainer.
